(function(d){d.fn.contentChanger=function(g){var f={animationDuration:400,animationMode:"move",changeableClassName:"changeable",defaultClassName:"default",preserveSizeClassName:"pz",triggerAttribute:"data-activates",triggerClassName:"trigger",triggerEventType:"click",triggerScope:""};if(g){d.extend(f,g)}return this.each(function(){var i=d(this);var l=d((f.triggerScope===""?this:f.triggerScope)).find("*");var k=l.filter("["+f.triggerAttribute+"]").filter("."+f.triggerClassName);var h=false;var j=i.find("."+f.changeableClassName).not("."+f.defaultClassName);j.hide();k.bind(f.triggerEventType,function(){if(h){return false}h=true;var s=d(this);var q=s.attr(f.triggerAttribute);var n=i.find("*").not("."+f.changeableClassName).add(i.find("."+q).filter(":visible")).add(i.find("*").not("."+q).filter(":hidden"));var o=i.find("."+q).not(n);var u=i.find("*").not("."+q).not(n);var r=n.filter(":visible");o=o.not(u);u=u.not(o);if(o.length===0&&u.length===0){h=false;return false}var p=r.find("*").parentsUntil(i).add(i).filter(":visible");var t=i.find("."+f.preserveSizeClassName);var v=d([]);p.each(function(){var w=d(this);if(w.find(o.add(u)).length===0){v=v.add(w)}});var m={container:i,toMove:r,toShow:o,toHide:u,untouched:n,containers:p,unaffectedContainers:v,preserveSizeContainers:t};switch(f.animationMode){case"none":a(m,f,function(){h=false});break;case"fade":e(m,f,function(){h=false});break;case"move":c(m,f,function(){h=false});break;default:c(m,f,function(){h=false});break}return false})})};function a(i,h,j){var f=i.toShow;var g=i.toHide;b(f,h.changeableClassName);g.hide();f.show();if(d.isFunction(j)){j()}}function e(g,k,r){var p=k.animationDuration;var h=g.container;var n=g.toMove;var i=g.toShow;var q=g.toHide;var s=h.children().filter(g.toShow.add(n));var m=h.children().filter(g.toHide.add(n));b(i,k.changeableClassName);q.hide();i.show();var f=h.height();q.show();i.hide();h.css({height:h.height()});var o=m.length;if(o>0){m.fadeOut(p,function(){if(--o===0){q.hide();l()}})}else{l()}function l(){var t=h.css("overflow");h.animate({height:f+"px"},p,function(){var u=s.length;if(u>0){i.not(s).show();s.fadeIn(p,function(){if(d.browser.msie){d(this).get(0).style.removeAttribute("filter")}if(--u===0){j()}})}else{j()}}).css("overflow",t)}function j(){h.css({height:"auto"});if(d.isFunction(r)){r()}}}function c(f,l,s){var p=l.animationDuration;var m=f.toMove;var g=f.toShow;var q=f.toHide;var r=f.unaffectedContainers;var o=f.preserveSizeContainers.not(r);var k=f.containers.not(o).not(r);m=m.not(r.find("*"));m.add(q).each(function(){var u=d(this);var t={originalPositionType:d(this).css("position"),originalPosition:{top:(u.css("top")!=="auto"?parseFloat(u.css("top"),10):0),left:(u.css("left")!=="auto"?parseFloat(u.css("left"),10):0)}};u.data(t);u.css({position:"relative"});u.data("oldPosition",u.position())});b(g,l.changeableClassName);k.each(function(t){var u=d(this);u.data("oldHeight",u.height());u.css({height:u.height()+"px"})});m.add(q).each(function(u){var v=d(this);var t=d.extend(true,{},v.data("oldPosition"));t.top-=v.position().top;v.data("jumpedPosition",t)});q.hide();m.each(function(t){var u=d(this);u.data("middlePosition",u.position())});k.each(function(){d(this).css({height:"auto"})});g.show();k.each(function(t){var u=d(this);u.data("newHeight",u.height())});g.each(function(){var u=d(this);var t={originalPositionType:d(this).css("position"),originalPosition:{top:(u.css("top")!=="auto"?parseFloat(u.css("top"),10):0),left:(u.css("left")!=="auto"?parseFloat(u.css("left"),10):0)}};u.data(t);u.css({position:"relative"});u.data("oldPosition",u.position())});k.each(function(t){var u=d(this);u.css({height:u.data("newHeight")+"px"})});g.each(function(u){var v=d(this);var t=d.extend(true,{},v.data("oldPosition"));t.top-=v.position().top;v.data("jumpedPosition",t)});k.each(function(t){var u=d(this);u.css({height:u.data("oldHeight")+"px"})});m.each(function(t){var u=d(this);u.data("newPosition",u.position())});q.show();g.hide();m.add(q).each(function(){var t=d(this);t.css({top:t.data("jumpedPosition").top+t.data("originalPosition").top})});m.each(function(){var u=d(this);var t=d.extend(true,{},u.data("newPosition"));t.top+=u.data("jumpedPosition").top;u.data("newPosition",t)});var n=q.length;if(n>0){q.fadeOut(p,function(){if(--n===0){j()}})}else{j()}function j(){m.each(function(v){var w=d(this);w.css({top:(w.data("oldPosition").top-w.data("middlePosition").top+w.data("originalPosition").top)+"px",left:(w.data("oldPosition").left-w.data("middlePosition").left+w.data("originalPosition").left)+"px"})});m.each(function(v){var w=d(this);w.animate({top:(w.data("newPosition").top-w.data("middlePosition").top+w.data("originalPosition").top)+"px",left:(w.data("newPosition").left-w.data("middlePosition").left+w.data("originalPosition").left)+"px"},p)});var u=k.filter(function(){return d(this).css("display")==="inline"});var t=k.not(u).length;k.not(u).each(function(v){var w=d(this);var x=w.css("overflow");w.animate({height:w.data("newHeight")+"px"},{duration:p,queue:false,complete:function(){if(--t===0){i()}}}).css("overflow",x)})}function i(){m.add(q).each(function(){var u=d(this);u.css({top:u.data("originalPosition").top+u.data("jumpedPosition").top,left:u.data("originalPosition").left})});var t=g.length;if(t>0){g.each(function(){var u=d(this);u.css({top:u.data("jumpedPosition").top})});g.fadeIn(p,function(){if(d.browser.msie){d(this).get(0).style.removeAttribute("filter")}if(--t===0){h()}})}else{h()}}function h(){k.each(function(t){d(this).css({height:"auto"})});m.add(q).add(g).each(function(){var t=d(this);t.css({position:t.data("originalPositionType"),top:t.data("originalPosition").top,left:t.data("originalPosition").left})});if(d.isFunction(s)){s()}}}function b(g,f){g.each(function(){var i=d(this);var h=i.removeClass(f).css("display");i.addClass(f);i.css({display:h}).hide()})}})(jQuery);